<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe</title>
</head>

<body>

    <script type="module">
        import { User } from './src/entities/User.js'
        import { Storage } from './src/libs/Storage.js'
        import { UserRepository } from './src/repositories/UserRepositore.js'


        const userStorage = new Storage('user');
        const ingredientStorage = new Storage('ingredient');

        // userStorage.save({
        //     name: 'jose',
        //     email: 'jose@jose.com',
        //     photo: 'jose.png'
        // })
        // userStorage.findOne('7f458572-89cd8e4c')
        //     .then(console.log)

        // ingredientStorage.save({
        //     name: 'cebolinha'
        // });
        // ingredientStorage.save({
        //     name: 'repolho'
        // })
        // ingredientStorage.save({
        //     name: 'pimenta'
        // })


        // const usuariosAll = await userStorage.findAll();
        // // console.table(usuariosAll)

        // const allIngredients = await ingredientStorage.findAll()

        // await ingredientStorage.findOneAndUpdate('67a6d3d3-29bea746', {
        //     name: 'Pimenta'
        // })

        // console.log(allIngredients);

        // await ingredientStorage.remove('76df4a6d-9e3a8c1a')

        const userRepository = new UserRepository(Storage);

        // const mariaUser = await userRepository.save({
        //     name: 'Roberto',
        //     email: 'roberto@roberto.com',
        //     photo: 'roberto.png'
        // });
        // const daniloUser = await userRepository.save(new User({
        //     name: 'Danilo',
        //     email: 'danilo@danilo.com',
        //     photo: 'danilo.png'
        // }))

        const userJoao = await userRepository.getById('2b08c611-ebb35b11')
        userJoao.photo = 'new_joao.png';

        const newJoao = await userRepository.update(userJoao);

        console.log(await userRepository.getAll());

    </script>
</body>

</html>